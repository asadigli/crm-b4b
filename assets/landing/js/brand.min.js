import{l,paginateController,getUrlParameter,filter_url,$_get,$db,hdKey,pg_lang,path_local}from"./parts.min.js?v=1abc";import{productComponent}from"./components.min.js?v=1";import{Screen}from"./current_screen.min.js?v=1";$(function(){if($('[data-role="model-pg-list"]').length){let t=getUrlParameter("model-year")||"",e=t=>{$("input,select,textarea").attr("disabled",!0).addClass("disabled-manually");let e=$('[data-role="brand-years"]'),a=$('[data-role="model-pg-list"]').data("brand-id");$.ajax({url:"/get-car-years",type:"GET",data:{brand:a},headers:hdKey,success:function(a){let r=Array.isArray(a)?`<option value="">- ${l("Choose year")} -</option>${a.map((e,a)=>`<option value="${e}"${+t==+e?" selected":""}>${e}</option>`).join("")}`:"";e.html(r),e.removeClass("load")},error:function(){console.error(d)},complete:function(){$(".disabled-manually").attr("disabled",!1).removeClass("disabled-manually")}})},a=t=>{let e=$('[data-role="model-pg-list"]'),a=e.data("brand-id");$.ajax({url:"/get-car-models",type:"GET",data:{brand:a,year:t},headers:hdKey,success:function(t){let r=["","",""],l=t.length;if(Array.isArray(t)){let e=Math.ceil(l/3);t.map((t,l)=>{r[l<e?0:l<2*e?1:2]+=`<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href="${path_local(`brand/${a}/models/${t.id}/engine`)}">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<em class="fas fa-sort-up"></em>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>${t.name}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>`})}for(var n=0;n<3;n++)e.find(".list-line").eq(n).find("ul").html(r[n]);e.removeClass("load")},error:function(){console.error(d)},complete:function(){}})};e(t),a(t),$db.on("change",'[data-role="brand-years"]',function(){t=$(this).val(),filter_url([{"model-year":t}]),a(t)})}else if($('[data-role="engine-pg-list"]').length){let t=getUrlParameter("engine-year")||"",e=t=>{let e=$('[data-role="engine-pg-list"]'),a=e.data("brand-id"),r=e.data("model-id");$.ajax({url:"/get-car-engine",headers:hdKey,type:"GET",data:{model:r,year:t},success:function(t){let l=["","",""],n=t.length;if(Array.isArray(t)){let e=Math.ceil(n/3);t.map((t,n)=>{l[n<e?0:n<2*e?1:2]+=`<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href="${path_local(`brand/${a}/models/${r}/engine/${t.id}/cataloge`)}">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<em class="fas fa-sort-up"></em>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>${t.name} - ${t.ban} (${t.car_pm})</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>`})}for(var o=0;o<3;o++)e.find(".list-line").eq(o).find("ul").html(l[o]);e.removeClass("load")},error:function(){console.error(d)},complete:function(){}})};e(t)}});